<div class="page">
    <div class="title">
        <h1>Local Development</h1>
        <div class="text-light text-large">
            <p>This page explains how to set up local development of this library by linking it into a consuming project locally instead of importing from NPM.</p>
        </div>
    </div>
    <tab-separator />
    <div class="content">
        <div class="section">
            <h3>Purpose</h3>
            <p>
                When using this library, you sometimes want to host it locally instead of pulling it from NPM.
                <br />
                This way, if you make any changes to the library, they are instantly visible in your consuming application, enabling a seamless developer experience.
                <br />
                When you commit/publish your app, make sure that you update the library on NPM as well, and update your app to use the NPM version.
            </p>
        </div>
        <div class="section">
            <h3>Linking the source code of this library into the consuming project</h3>
            <ol>
                <li>Open both the source code of this library and the consuming project in an editor (such as VSCode)</li>
                <li>
                    Run the following command from the root of
                    <b>this library</b>
                    :
                    <div class="monaco-container">
                        <tab-monaco-editor uri="file://dev-page/link" language="shell" value="npm run dev:link" [style.height]="'20px'" [style.width]="'140px'" [options]="options" />
                    </div>
                </li>
                <li>
                    Update the
                    <code>angular.json</code>
                    file of the
                    <b>consuming project</b>
                    to preserve symlinks and skip pre-bundle caching of vite:
                    <div class="monaco-container">
                        <tab-monaco-editor uri="file://dev-page/angularjson" language="json" [value]="angularJsonContent" [style.height]="'380px'" [style.width]="'440px'" [options]="options" />
                    </div>
                </li>
                <li>
                    Update the
                    <code>tsconfig.json</code>
                    file of the
                    <b>consuming project</b>
                    to add paths for this library. This is required for
                    <code>ng serve</code>
                    to detect code live changes and recompile:
                    <div class="monaco-container">
                        <tab-monaco-editor uri="file://dev-page/tsconfig" language="json" [value]="tsconfigJsonContent" [style.height]="'135px'" [style.width]="'400px'" [options]="options" />
                    </div>
                </li>
                <li>
                    Run the following command from the root of the
                    <b>consuming project</b>
                    to install
                    <code>npx link</code>
                    . We use this instead if
                    <code>npm link</code>
                    since its much safer:
                    <div class="monaco-container">
                        <tab-monaco-editor uri="file://dev-page/savelink" language="shell" value="npm install --save-dev link" [style.height]="'20px'" [style.width]="'210px'" [options]="options" />
                    </div>
                </li>
                <li>
                    Run the following command from the root of the
                    <b>consuming project</b>
                    to link the library:
                    <div class="monaco-container">
                        <tab-monaco-editor
                            uri="file://dev-page/dolink"
                            language="shell"
                            value="npx link [path-to-this-library]/dist/component-library"
                            [style.height]="'20px'"
                            [style.width]="'420px'"
                            [options]="options"
                        />
                    </div>
                </li>
            </ol>
        </div>
        <div class="section">
            <h3>Unlinking the library</h3>
            <div>
                When you've finished development or want to commit the source code of the
                <b>consuming project</b>
                , you need to
                <code>unlink</code>
                this library by running:
            </div>
            <div class="monaco-container">
                <tab-monaco-editor uri="file://dev-page/reset" language="shell" value="npm install" [style.height]="'20px'" [style.width]="'90px'" [options]="options" />
            </div>
        </div>
    </div>
</div>
