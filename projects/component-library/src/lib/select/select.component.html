<div class="content-display">
    @if (selectedValueTemplates().length === 0) {
    <span class="placeholder">{{ placeholder() }}</span>
    } @else {
    <span class="value">
        @if (selectedValueTemplates().length >
        multipleSelectionMaxItemsListed()) {
        <ng-container>{{
            multipleSelectionNumberSelectedTemplate().replace(
                "{number}",
                selectedValueTemplates().length.toString()
            )
        }}</ng-container>
        } @else { @for (v of selectedValueTemplates(); track v.value; let last =
        $last) {
        <ng-container
            [ngTemplateOutlet]="v.template"
            [ngTemplateOutletContext]="selectedValueTemplateContext()"
        ></ng-container>
        @if (!last) {
        <span>, </span>
        } } }
    </span>
    }
</div>
@if (displayClearButton()) {
<tab-icon iconButton value="clear" (click)="clearValue($event)" (keydown)="clearKeyDown($event)" tabindex="0"></tab-icon>
}
@if (showChevron()) {
    <tab-icon class="dropdown" icon-button [value]="dropdownOpen() ? 'keyboard_arrow_up': 'keyboard_arrow_down'"></tab-icon>
}


<ng-template #dropdownTemplate>
    <div class="dropdown-container" 
        [id]="dropdownId" [ngStyle]="dropdownContainerCss()">
        @if (dropdownPrefix()) {
            <div class="options-prefix">
                <ng-content select="tab-prefix"></ng-content>
            </div>
        }
        <div class="option-values" [ngStyle]="dropdownOptionsContainerCss()">
            @for (option of options(); track option.value()) {
                <div
                    class="option-wrapper"
                    (click)="selectValue(option)"
                    (mousedown)="optionMouseDown($event)"
                    [class.disabled]="option.disabled()"
                    [class.highlight]="!!highlightedOption() && highlightedOption()!.value() === option.value()"
                >
                    <div class="check" [ngClass]="selectedCheckIconLocation()">
                        @if (isValueSelected(option)) {
                        <tab-icon value="check" ></tab-icon>
                        }
                    </div>
                    <div class="option-content">
                        <ng-container
                            [ngTemplateOutlet]="option.template()"
                            [ngTemplateOutletContext]="dropdownValueTemplateContext()"
                        ></ng-container>
                    </div>
                </div>
                }
        </div>
        @if (dropdownSuffix()) {
            <div class="options-suffix">
                <ng-content select="tab-suffix"></ng-content>
            </div>
        }
    </div>
</ng-template>
